<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" href="./assets/favicon.ico" type="image/x-icon">
    <title>Sabic Station - Welcome</title>
    <style>
        /* تنسيقات الخريطة */
        #map {
            height: 500px;
            width: 100%;
            border-radius: 10px;
            margin-top: 20px;
        }

        .container {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            gap: 20px;
            padding: 20px;
        }

        .map-container {
            flex: 2;
            background-color: #f4f4f9;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .details {
            flex: 1;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .notifications {
            flex: 1;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .notification-item {
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
            border-left: 4px solid #00509e;
        }

        .notification-item.alert {
            border-left-color: #ff0000;
        }

        .notification-item.update {
            border-left-color: #008000;
        }

        .notification-item.weather {
            border-left-color: #ff8c00;
        }

        .station-info {
            margin-top: 20px;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .station-info h2 {
            margin-bottom: 15px;
        }

        .station-info ul {
            list-style-type: none;
            padding: 0;
        }

        .station-info ul li {
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
            border-left: 4px solid #00509e;
        }

        .station-info ul li.alert {
            border-left-color: #ff0000;
        }

        .station-info ul li.update {
            border-left-color: #008000;
        }

        .station-info ul li.weather {
            border-left-color: #ff8c00;
        }
    </style>
</head>

<body>
    <header>
        <div class="social">
            <a href="#">
                <img src="C:\Users\renad\OneDrive\سطح المكتب\Metro-Project\Madar logo.png" alt="Madar logo">
            </a>
        </div>
        <div>
            <nav>
                <a href="complaints.html">الشكاوى</a>
                <a href="station-management.html">إدارة المحطات</a>
                <a href="journey-tracking.html" class="active">تتبع الرحلات</a>
                <a href="path-planning.html">مسارات</a>
                <a href="ticketing.html">التذاكر</a>
                <a href="sign-in.html">تسجيل الدخول</a>
                <a href="index.html">الرئيسية</a>
            </nav>
        </div>
    </header>

    <!-- محتوى الصفحة بين الهدر والفوتر -->
    <div class="container">
        <!-- خريطة مركزية -->
        <div class="map-container">
            <h2>خريطة المسارات</h2>
            <div id="map"></div>
        </div>

        <!-- تفاصيل جانبية -->
        <div class="details">
            <h2>تفاصيل الرحلة</h2>
            <label for="start-station">نقطة الانطلاق:</label>
            <select id="start-station">
                <option value="" disabled selected>اختر نقطة الانطلاق</option>
                <option value="محطة شمال الرياض">محطة شمال الرياض</option>
                <option value="محطة وسط الرياض">محطة وسط الرياض</option>
                <option value="محطة جنوب الرياض">محطة جنوب الرياض</option>
                <option value="محطة غرب الرياض">محطة غرب الرياض</option>
                <option value="محطة شرق الرياض">محطة شرق الرياض</option>
            </select>

            <label for="end-station">نقطة الوصول:</label>
            <select id="end-station">
                <option value="" disabled selected>اختر نقطة الوصول</option>
                <option value="محطة شمال الرياض">محطة شمال الرياض</option>
                <option value="محطة وسط الرياض">محطة وسط الرياض</option>
                <option value="محطة جنوب الرياض">محطة جنوب الرياض</option>
                <option value="محطة غرب الرياض">محطة غرب الرياض</option>
                <option value="محطة شرق الرياض">محطة شرق الرياض</option>
            </select>

            <button onclick="calculateShortestPath()">احسب أقصر مسار</button>

            <h3>أقصر مسار</h3>
            <p><strong>المسار:</strong> <span id="shortest-path">--</span></p>
            <p><strong>مدة الرحلة:</strong> <span id="shortest-time">--</span> دقيقة</p>
            <p><strong>التبديلات بين المسارات:</strong> <span id="path-colors">--</span></p>
        </div>

        <!-- إشعارات تنبيهية -->
        <div class="notifications">
            <h2>التنبيهات</h2>
            <div id="notifications-list">
                <!-- التنبيهات سيتم إضافتها هنا بشكل ديناميكي -->
            </div>
        </div>
    </div>

    <!-- معلومات المحطات والمسارات -->
    <div class="station-info">
        <h2>معلومات المحطات والمسارات</h2>
        <ul>
            <li>
                <strong>محطة شمال الرياض:</strong> نقطة انطلاق للمسار الأزرق. يمكنك التبديل بين المسارات التالية: المسار الأزرق، المسار الأصفر، المسار البنفسجي.
            </li>
            <li>
                <strong>محطة وسط الرياض:</strong> نقطة انطلاق للمسار الأحمر. يمكنك التبديل بين المسارات التالية: المسار الأحمر، المسار الأزرق، المسار الأخضر.
            </li>
            <li>
                <strong>محطة جنوب الرياض:</strong> نقطة انطلاق للمسار الأزرق. يمكنك التبديل بين المسارات التالية: المسار الأزرق، المسار البرتقالي.
            </li>
            <li>
                <strong>محطة غرب الرياض:</strong> نقطة انطلاق للمسار الأحمر. يمكنك التبديل بين المسارات التالية: المسار الأحمر، المسار البرتقالي.
            </li>
            <li>
                <strong>محطة شرق الرياض:</strong> نقطة انطلاق للمسار البنفسجي. يمكنك التبديل بين المسارات التالية: المسار البنفسجي، المسار الأحمر، المسار البرتقالي.
            </li>
        </ul>

        <h3>تفاصيل المسارات</h3>
        <ul>
            <li>
                <strong>المسار الأزرق:</strong> يبدأ من محطة بنك الأول وينتهي عند محطة دار البيضاء. المرافق المحيطة: مركز الملك عبد الله المالي، مركز التسوق الرحاب، مدينة الملك عبد الله الرياضية، فنادق متعددة، مقاهي ومطاعم. الإحصائيات: عدد المحطات: 13 | المسافة: 20 كم.
            </li>
            <li>
                <strong>المسار الأحمر:</strong> يبدأ من محطة مدينة الملك فهد الرياضية وينتهي عند محطة جامعة الملك سعود. المرافق المحيطة: مول الرياض بارك، مستشفى الملك فهد، مجمعات تجارية كبيرة، مطاعم عالمية. الإحصائيات: عدد المحطات: 12 | المسافة: 18 كم.
            </li>
            <li>
                <strong>المسار البرتقالي:</strong> يبدأ من محطة خشم العان وينتهي عند محطة طريق جدة. المرافق المحيطة: مجمعات سكنية، مرافق رياضية، مراكز تجارية صغيرة. الإحصائيات: عدد المحطات: 9 | المسافة: 12 كم.
            </li>
            <li>
                <strong>المسار الأصفر:</strong> يبدأ من محطة صالة مطار الملك خالد 1-2 وينتهي عند محطة المركز المالي. المرافق المحيطة: مطار الملك خالد الدولي، مركز الملك عبد الله المالي، مراكز تجارية كبيرة، فنادق فاخرة. الإحصائيات: عدد المحطات: 14 | المسافة: 25 كم.
            </li>
            <li>
                <strong>المسار الأخضر:</strong> يبدأ من محطة وزارة التعليم وينتهي عند محطة المتحف الوطني. المرافق المحيطة: المتحف الوطني، المراكز الثقافية، مكتبة الملك فهد، الجامعات. الإحصائيات: عدد المحطات: 7 | المسافة: 10 كم.
            </li>
            <li>
                <strong>المسار البنفسجي:</strong> يبدأ من محطة النسيم وينتهي عند محطة المركز المالي. المرافق المحيطة: مراكز مالية، مولات، مراكز تجارية، مطاعم. الإحصائيات: عدد المحطات: 8 | المسافة: 15 كم.
            </li>
        </ul>
    </div>

    <footer>
        <div class="footer">
            <div class="logos">
                <img src="C:\Users\renad\OneDrive\سطح المكتب\Metro-Project\University Logo.png" alt="University Logo">
                <img src="C:\Users\renad\OneDrive\سطح المكتب\Metro-Project\ccis-logo.png" alt="CCIS Logo">
            </div>
            &copy; 2024-25 / IMSIU / CCIS&trade;
        </div>
    </footer>

    <script>
        // إحداثيات المحطات
        const stationsCoordinates = {
            "محطة شمال الرياض": { lat: 24.8136, lng: 46.6753 },
            "محطة وسط الرياض": { lat: 24.7136, lng: 46.6753 },
            "محطة جنوب الرياض": { lat: 24.6136, lng: 46.6753 },
            "محطة غرب الرياض": { lat: 24.7136, lng: 46.5753 },
            "محطة شرق الرياض": { lat: 24.7136, lng: 46.7753 }
        };

        // ألوان المسارات
        const pathColors = {
            الأزرق: "#00509e",
            الأحمر: "#ff0000",
            البرتقالي: "#ff8c00",
            الأصفر: "#ffff00",
            الأخضر: "#008000",
            البنفسجي: "#800080"
        };

        // رسم الخريطة
        let map;
        let directionsRenderer;

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 24.7136, lng: 46.6753 },
                zoom: 12,
            });

            directionsRenderer = new google.maps.DirectionsRenderer();
            directionsRenderer.setMap(map);

            // رسم المحطات
            for (const station in stationsCoordinates) {
                new google.maps.Marker({
                    position: stationsCoordinates[station],
                    map: map,
                    title: station,
                });
            }

            // رسم المسارات
            drawPaths();
        }

        // رسم المسارات
        function drawPaths() {
            const paths = [
                { stations: ["محطة شمال الرياض", "محطة وسط الرياض", "محطة جنوب الرياض"], color: pathColors.الأزرق },
                { stations: ["محطة وسط الرياض", "محطة غرب الرياض"], color: pathColors.الأحمر },
                { stations: ["محطة جنوب الرياض", "محطة غرب الرياض", "محطة شرق الرياض"], color: pathColors.البرتقالي },
                { stations: ["محطة شمال الرياض", "محطة شرق الرياض"], color: pathColors.البنفسجي },
                { stations: ["محطة شمال الرياض", "محطة وسط الرياض"], color: pathColors.الأصفر }, // المسار الأصفر
                { stations: ["محطة وسط الرياض", "محطة جنوب الرياض"], color: pathColors.الأحمر } // المسار الأحمر
            ];

            paths.forEach(path => {
                const pathCoordinates = path.stations.map(station => stationsCoordinates[station]);
                new google.maps.Polyline({
                    path: pathCoordinates,
                    geodesic: true,
                    strokeColor: path.color,
                    strokeOpacity: 1.0,
                    strokeWeight: 4,
                    map: map,
                });
            });
        }

        // حساب أقصر مسار
        function calculateShortestPath() {
            const start = document.getElementById("start-station").value;
            const end = document.getElementById("end-station").value;

            if (!start || !end) {
                alert("يرجى اختيار نقطة الانطلاق ونقطة الوصول.");
                return;
            }

            const directionsService = new google.maps.DirectionsService();
            directionsRenderer.setMap(map);

            const request = {
                origin: stationsCoordinates[start],
                destination: stationsCoordinates[end],
                travelMode: google.maps.TravelMode.TRANSIT,
            };

            directionsService.route(request, (result, status) => {
                if (status === google.maps.DirectionsStatus.OK) {
                    directionsRenderer.setDirections(result);
                    document.getElementById("shortest-path").textContent = result.routes[0].summary;
                    document.getElementById("shortest-time").textContent = Math.floor(result.routes[0].legs[0].duration.value / 60);
                    document.getElementById("path-colors").textContent = getPathColors(result.routes[0]);

                    // إضافة تنبيهات مرتبطة بالرحلة
                    updateNotifications(start, end);
                } else {
                    alert("تعذر رسم المسار على الخريطة.");
                }
            });
        }

        // الحصول على ألوان المسارات
        function getPathColors(route) {
            const colors = [];
            route.legs[0].steps.forEach(step => {
                if (step.travel_mode === "TRANSIT") {
                    colors.push(step.transit.line.vehicle.name);
                }
            });
            return colors.join(", ");
        }

        // تحديث التنبيهات
        function updateNotifications(start, end) {
            const notificationsList = document.getElementById("notifications-list");
            notificationsList.innerHTML = "";

            const notifications = [
                { type: "alert", message: `تنبيه: تأخير بسيط بسبب ازدحام السير في منطقة ${start}.` },
                { type: "update", message: `تحديث: تم المرور بمحطة ${start} بنجاح.` },
                { type: "weather", message: "الطقس: الجو مشمس مع درجة حرارة 30°C." }
            ];

            notifications.forEach(notification => {
                const notificationItem = document.createElement("div");
                notificationItem.className = `notification-item ${notification.type}`;
                notificationItem.textContent = notification.message;
                notificationsList.appendChild(notificationItem);
            });
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpcvzyfaj7CIwZVo6IRBo4w7ei0CY4DEQ&callback=initMap" async defer></script>
</body>
</html>